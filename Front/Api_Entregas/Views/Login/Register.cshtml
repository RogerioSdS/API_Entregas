@using Api_Entregas.ViewModels
@model RegisterViewModel

@{
    ViewData["Title"] = "Pagina de Cadastro";
}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Api_Entregas</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.2/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" />
    <link rel="stylesheet" href="~/css/register.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/toastr.min.css" asp-append-version="true" />
</head>
<body>
    <div class="formbold-main-wrapper">
        <div class="formbold-form-wrapper">
            <form asp-action="Register" method="post">
                <div class="formbold-form-title">
                    <h2>Cadastro</h2>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt.</p>
                </div>

                @if (TempData["FormData"] != null)
                {
                    <div class="alert alert-info">
                        @TempData["FormData"]
                    </div>
                }

                <div class="formbold-input-flex">
                    <div>
                        <label for="firstname" class="formbold-form-label">Nome</label>
                        <input type="text" name="firstname" asp-for="FirstName" id="firstname" class="formbold-form-input" required />
                    </div>
                    <div>
                        <label for="lastname" class="formbold-form-label">Sobrenome</label>
                        <input type="text" name="lastname" asp-for="LastName" id="lastname" class="formbold-form-input" required />
                    </div>
                </div>

                <div class="formbold-input-flex">
                    <div>
                        <label for="email" class="formbold-form-label">Email</label>
                        <input type="email" name="email" asp-for="Email" id="email" class="formbold-form-input" required autocomplete="email" />
                        <small id="emailErro" class="text-danger" style="display:none;">
                            Por favor, insira um email válido.
                        </small>
                    </div>
                    <div>
                        <label for="phone" class="formbold-form-label">Telefone</label>
                        <input
                            type="tel"
                            asp-for="Phone"
                            name="phone"
                            id="phone"
                            class="formbold-form-input"
                            required
                            pattern="\(\d{2}\) \d{5}-\d{4}"
                            title="Digite o telefone no formato (99) 99999-9999"
                            maxlength="16"
                            inputmode="numeric"
                            autocomplete="tel"
                            placeholder ="(99) 99999-9999"
                        />
                        <small id="phoneErro" class="text-danger" style="display:none;">
                            Por favor, insira um telefone válido no formato (99) 99999-9999.
                        </small>
                    </div>
                </div>

                <div class="formbold-mb-3">
                    <label for="address" class="formbold-form-label">Endereço</label>
                    <input type="text" name="address" asp-for="Address" id="address" class="formbold-form-input" required />
                </div>

                <div class="formbold-mb-3">
                    <label for="complement" class="formbold-form-label">
                        Complemento
                        <span class="formbold-text-xs formbold-text-gray-500">Ex: Apartamento, andar, etc. (opcional)</span>
                    </label>
                    <input type="text" name="complement" asp-for="Complement" id="complement" class="formbold-form-input" />
                </div>

                <div class="formbold-input-flex">
                    <div>
                        <label for="city" class="formbold-form-label">Cidade</label>
                        <input type="text" name="city" asp-for="City" id="city" class="formbold-form-input" required autocomplete="address-level2" />
                    </div>
                    <div>
                        <label for="post" class="formbold-form-label">CEP</label>
                        <input
                            type="text"
                            asp-for="Post" 
                            name="post"
                            id="post"
                            class="formbold-form-input"
                            required
                            title="Digite o CEP no formato 99999-999"
                            maxlength="9"
                            inputmode="numeric"
                            placeholder="99999-999"
                          />
                        <small id="postErro" class="text-danger" style="display:none;">
                            Por favor, insira um CEP válido no formato 99999-999.
                        </small>
                    </div>
                </div>

                <div>
                    <label for="password" class="formbold-form-label">Senha</label>
                    <input type="password" name="password" id="password" class="formbold-form-input" required />
                </div>

                <div>
                    <label for="confirmPassword" class="formbold-form-label">Confirme a senha</label>
                    <input type="password" name="confirmPassword" id="confirmPassword"  class="formbold-form-input" required />
                </div>

                <small id="senhaErro" class="text-danger" style="display:none;">
                    As senhas não coincidem.
                </small>

                <div>
                    <input type="checkbox" id="supportCheckbox" name="supportCheckbox" />
                    <label for="supportCheckbox">Aceito os termos de uso</label>
                </div>

                <button type="submit" class="formbold-btn" id="registerButton" style="display:none;">Registrar agora</button>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/inputmask/5.0.9/inputmask.min.js"></script>
    
    <script src="~/js/toastr.min.js" asp-append-version="true"></script>
    <script type="module" src="~/js/register/index.js" asp-append-version="true"></script>

    <script>
        // Exibir mensagens do TempData (sucesso)
        @if (TempData["SuccessMessage"] != null)
        {
            <text>toastr.success('@TempData["SuccessMessage"]');</text>
        }

        // Exibir erros do ModelState
        @if (!ViewData.ModelState.IsValid)
        {
            foreach (var error in ViewData.ModelState.Values.SelectMany(v => v.Errors))
            {
                <text>toastr.error('@error.ErrorMessage');</text>
            }
        }
    </script>
</body>
</html>